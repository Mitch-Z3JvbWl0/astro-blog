---
import { getCollection } from 'astro:content';
import FormattedDate from './FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<ul class="blog-grid">
  {posts.map(post => (
    <li>
      <a href={`/blog/${post.id}/`}>
        {post.data.heroImage && (
          <img src={post.data.heroImage.src} alt={post.data.title} class="hero-image" />
        )}
        <h3>{post.data.title}</h3>
        <p><FormattedDate date={post.data.pubDate} /></p>
      </a>
    </li>
  ))}
</ul>

<style>
  .blog-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    list-style: none;
    padding: 0;
  }

  .blog-grid li {
    width: calc(50% - 1rem);
  }

  .blog-grid img.hero-image {
    width: 100%;
    height: auto;
    border-radius: 8px;
    margin-bottom: 0.5rem;
  }

  @media (max-width: 768px) {
    .blog-grid li {
      width: 100%;
    }
  }
</style>
